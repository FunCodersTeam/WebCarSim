THREE.OrbitControls=function(n,t){function gt(){return Math.PI/1800*i.autoRotateSpeed}function g(){return Math.pow(.95,i.zoomSpeed)}function it(n){e.theta-=n}function st(n){e.phi-=n}function rt(n){i.object.isPerspectiveCamera?k/=n:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*n)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function lt(n){i.object.isPerspectiveCamera?k*=n:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/n)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ni(n){o.set(n.clientX,n.clientY)}function ti(n){v.set(n.clientX,n.clientY)}function at(n){c.set(n.clientX,n.clientY)}function ii(n){s.set(n.clientX,n.clientY);h.subVectors(s,o).multiplyScalar(i.rotateSpeed);var t=i.domElement===document?i.domElement.body:i.domElement;it(2*Math.PI*h.x/t.clientHeight);st(2*Math.PI*h.y/t.clientHeight);o.copy(s);i.update()}function ri(n){y.set(n.clientX,n.clientY);b.subVectors(y,v);b.y>0?rt(g()):b.y<0&&lt(g());v.copy(y);i.update()}function ui(n){l.set(n.clientX,n.clientY);a.subVectors(l,c).multiplyScalar(i.panSpeed);p(a.x,a.y);c.copy(l);i.update()}function fi(){}function ei(n){n.deltaY<0?lt(g()):n.deltaY>0&&rt(g());i.update()}function oi(n){var t=!1;switch(n.keyCode){case i.keys.UP:p(0,i.keyPanSpeed);t=!0;break;case i.keys.BOTTOM:p(0,-i.keyPanSpeed);t=!0;break;case i.keys.LEFT:p(i.keyPanSpeed,0);t=!0;break;case i.keys.RIGHT:p(-i.keyPanSpeed,0);t=!0}t&&(n.preventDefault(),i.update())}function si(n){o.set(n.touches[0].pageX,n.touches[0].pageY)}function hi(n){var u,f;if(i.enableZoom){var t=n.touches[0].pageX-n.touches[1].pageX,r=n.touches[0].pageY-n.touches[1].pageY,e=Math.sqrt(t*t+r*r);v.set(0,e)}i.enablePan&&(u=.5*(n.touches[0].pageX+n.touches[1].pageX),f=.5*(n.touches[0].pageY+n.touches[1].pageY),c.set(u,f))}function ci(n){s.set(n.touches[0].pageX,n.touches[0].pageY);h.subVectors(s,o).multiplyScalar(i.rotateSpeed);var t=i.domElement===document?i.domElement.body:i.domElement;it(2*Math.PI*h.x/t.clientHeight);st(2*Math.PI*h.y/t.clientHeight);o.copy(s);i.update()}function li(n){var u,f;if(i.enableZoom){var t=n.touches[0].pageX-n.touches[1].pageX,r=n.touches[0].pageY-n.touches[1].pageY,e=Math.sqrt(t*t+r*r);y.set(0,e);b.set(0,Math.pow(y.y/v.y,i.zoomSpeed));rt(b.y);v.copy(y)}i.enablePan&&(u=.5*(n.touches[0].pageX+n.touches[1].pageX),f=.5*(n.touches[0].pageY+n.touches[1].pageY),l.set(u,f),a.subVectors(l,c).multiplyScalar(i.panSpeed),p(a.x,a.y),c.copy(l));i.update()}function ai(){}function vt(n){if(i.enabled!==!1){n.preventDefault();i.domElement.focus?i.domElement.focus():window.focus();switch(n.button){case i.mouseButtons.LEFT:if(n.ctrlKey||n.metaKey||n.shiftKey){if(i.enablePan===!1)return;at(n);u=r.PAN}else{if(i.enableRotate===!1)return;ni(n);u=r.ROTATE}break;case i.mouseButtons.MIDDLE:if(i.enableZoom===!1)return;ti(n);u=r.DOLLY;break;case i.mouseButtons.RIGHT:if(i.enablePan===!1)return;at(n);u=r.PAN}u!==r.NONE&&(document.addEventListener("mousemove",ut,!1),document.addEventListener("mouseup",ft,!1),i.dispatchEvent(nt))}}function ut(n){if(i.enabled!==!1){n.preventDefault();switch(u){case r.ROTATE:if(i.enableRotate===!1)return;ii(n);break;case r.DOLLY:if(i.enableZoom===!1)return;ri(n);break;case r.PAN:if(i.enablePan===!1)return;ui(n)}}}function ft(n){i.enabled!==!1&&(fi(n),document.removeEventListener("mousemove",ut,!1),document.removeEventListener("mouseup",ft,!1),i.dispatchEvent(tt),u=r.NONE)}function yt(n){i.enabled!==!1&&i.enableZoom!==!1&&(u===r.NONE||u===r.ROTATE)&&(n.preventDefault(),n.stopPropagation(),i.dispatchEvent(nt),ei(n),i.dispatchEvent(tt))}function pt(n){i.enabled!==!1&&i.enableKeys!==!1&&i.enablePan!==!1&&oi(n)}function wt(n){if(i.enabled!==!1){n.preventDefault();switch(n.touches.length){case 1:if(i.enableRotate===!1)return;si(n);u=r.TOUCH_ROTATE;break;case 2:if(i.enableZoom===!1&&i.enablePan===!1)return;hi(n);u=r.TOUCH_DOLLY_PAN;break;default:u=r.NONE}u!==r.NONE&&i.dispatchEvent(nt)}}function bt(n){if(i.enabled!==!1){n.preventDefault();n.stopPropagation();switch(n.touches.length){case 1:if(i.enableRotate===!1)return;if(u!==r.TOUCH_ROTATE)return;ci(n);break;case 2:if(i.enableZoom===!1&&i.enablePan===!1)return;if(u!==r.TOUCH_DOLLY_PAN)return;li(n);break;default:u=r.NONE}}}function kt(n){i.enabled!==!1&&(ai(n),i.dispatchEvent(tt),u=r.NONE)}function dt(n){i.enabled!==!1&&n.preventDefault()}this.object=n;this.domElement=t!==undefined?t:document;this.enabled=!0;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=- Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=1;this.screenSpacePanning=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return f.phi};this.getAzimuthalAngle=function(){return f.theta};this.saveState=function(){i.target0.copy(i.target);i.position0.copy(i.object.position);i.zoom0=i.object.zoom};this.reset=function(){i.target.copy(i.target0);i.object.position.copy(i.position0);i.object.zoom=i.zoom0;i.object.updateProjectionMatrix();i.dispatchEvent(et);i.update();u=r.NONE};this.update=function(){var t=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(n.up,new THREE.Vector3(0,1,0)),c=o.clone().inverse(),s=new THREE.Vector3,h=new THREE.Quaternion;return function(){var n=i.object.position;return(t.copy(n).sub(i.target),t.applyQuaternion(o),f.setFromVector3(t),i.autoRotate&&u===r.NONE&&it(gt()),f.theta+=e.theta,f.phi+=e.phi,f.theta=Math.max(i.minAzimuthAngle,Math.min(i.maxAzimuthAngle,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=k,f.radius=Math.max(i.minDistance,Math.min(i.maxDistance,f.radius)),i.target.add(w),t.setFromSpherical(f),t.applyQuaternion(c),n.copy(i.target).add(t),i.object.lookAt(i.target),i.enableDamping===!0?(e.theta*=1-i.dampingFactor,e.phi*=1-i.dampingFactor,w.multiplyScalar(1-i.dampingFactor)):(e.set(0,0,0),w.set(0,0,0)),k=1,d||s.distanceToSquared(i.object.position)>ot||8*(1-h.dot(i.object.quaternion))>ot)?(i.dispatchEvent(et),s.copy(i.object.position),h.copy(i.object.quaternion),d=!1,!0):!1}}();this.dispose=function(){i.domElement.removeEventListener("contextmenu",dt,!1);i.domElement.removeEventListener("mousedown",vt,!1);i.domElement.removeEventListener("wheel",yt,!1);i.domElement.removeEventListener("touchstart",wt,!1);i.domElement.removeEventListener("touchend",kt,!1);i.domElement.removeEventListener("touchmove",bt,!1);document.removeEventListener("mousemove",ut,!1);document.removeEventListener("mouseup",ft,!1);window.removeEventListener("keydown",pt,!1)};var i=this,et={type:"change"},nt={type:"start"},tt={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},u=r.NONE,ot=1e-6,f=new THREE.Spherical,e=new THREE.Spherical,k=1,w=new THREE.Vector3,d=!1,o=new THREE.Vector2,s=new THREE.Vector2,h=new THREE.Vector2,c=new THREE.Vector2,l=new THREE.Vector2,a=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2;var ht=function(){var n=new THREE.Vector3;return function(t,i){n.setFromMatrixColumn(i,0);n.multiplyScalar(-t);w.add(n)}}(),ct=function(){var n=new THREE.Vector3;return function(t,r){i.screenSpacePanning===!0?n.setFromMatrixColumn(r,1):(n.setFromMatrixColumn(r,0),n.crossVectors(i.object.up,n));n.multiplyScalar(t);w.add(n)}}(),p=function(){var n=new THREE.Vector3;return function(t,r){var u=i.domElement===document?i.domElement.body:i.domElement,e,f;i.object.isPerspectiveCamera?(e=i.object.position,n.copy(e).sub(i.target),f=n.length(),f*=Math.tan(i.object.fov/2*Math.PI/180),ht(2*t*f/u.clientHeight,i.object.matrix),ct(2*r*f/u.clientHeight,i.object.matrix)):i.object.isOrthographicCamera?(ht(t*(i.object.right-i.object.left)/i.object.zoom/u.clientWidth,i.object.matrix),ct(r*(i.object.top-i.object.bottom)/i.object.zoom/u.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();i.domElement.addEventListener("contextmenu",dt,!1);i.domElement.addEventListener("mousedown",vt,!1);i.domElement.addEventListener("wheel",yt,!1);i.domElement.addEventListener("touchstart",wt,!1);i.domElement.addEventListener("touchend",kt,!1);i.domElement.addEventListener("touchmove",bt,!1);window.addEventListener("keydown",pt,!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(n){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!n}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(n){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!n}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(n){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!n}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(n){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!n}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(n){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!n}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(n){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=n}}})